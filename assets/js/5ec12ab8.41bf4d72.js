"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[72439],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,r[1]=l;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},86221:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const i={description:"TUTORIALS - To Do List App"},r="The View Locator",l={unversionedId:"tutorials/todo-list-app/locating-views",id:"tutorials/todo-list-app/locating-views",title:"The View Locator",description:"TUTORIALS - To Do List App",source:"@site/docs/tutorials/todo-list-app/locating-views.md",sourceDirName:"tutorials/todo-list-app",slug:"/tutorials/todo-list-app/locating-views",permalink:"/avalonia-docs/docs/next/tutorials/todo-list-app/locating-views",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/tutorials/todo-list-app/locating-views.md",tags:[],version:"current",frontMatter:{description:"TUTORIALS - To Do List App"},sidebar:"documentationSidebar",previous:{title:"Navigate Views",permalink:"/avalonia-docs/docs/next/tutorials/todo-list-app/navigate-views"},next:{title:"Add Item Buttons",permalink:"/avalonia-docs/docs/next/tutorials/todo-list-app/add-item-buttons"}},s={},p=[{value:"Source not Framework",id:"source-not-framework",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"the-view-locator"},"The View Locator"),(0,o.kt)("p",null,"On this page you will learn how the view locator class that the solution template added to your project is being used. You will see how this implements a 'convention over configuration' paradigm inside the content zone of your main window."),(0,o.kt)("p",null,"To help learn how it works, take some time to examine the view locator class:"," "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},'using Avalonia.Controls;\nusing Avalonia.Controls.Templates;\nusing System;\nusing ToDoList.ViewModels;\n\nnamespace ToDoList\n{\n    public class ViewLocator : IDataTemplate\n    {\n        public Control Build(object data)\n        {\n            var name = data.GetType().FullName!.Replace("ViewModel", "View");\n            var type = Type.GetType(name);\n\n            if (type != null)\n            {\n                return (Control)Activator.CreateInstance(type)!;\n            }\n            else\n            {\n                return new TextBlock { Text = "Not Found: " + name };\n            }\n        }\n\n        public bool Match(object data)\n        {\n            return data is ViewModelBase;\n        }\n    }\n}\n')),(0,o.kt)("p",null,"The view locator class defines a data template in code which takes a view model and can return a corresponding view. It works by defining two methods:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Match(object data)")," looks at the data and checks that it inherits from the  ",(0,o.kt)("inlineCode",{parentName:"li"},"ViewModelBase")," class - as both your view models do! If this check passes, then the ",(0,o.kt)("inlineCode",{parentName:"li"},"Build")," method is called:"," "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Build(object data)")," takes the fully qualified name of the view model type and replaces the string ",(0,o.kt)("inlineCode",{parentName:"li"},'"ViewModel"')," with the string ",(0,o.kt)("inlineCode",{parentName:"li"},'"View"'),". It then tries to create the view type, and if that is successful returns it.")),(0,o.kt)("p",null,"An instance of ",(0,o.kt)("inlineCode",{parentName:"p"},"ViewLocator")," is present in the ",(0,o.kt)("strong",{parentName:"p"},"App.axaml")," file in the app project (it was added by the solution template). It should look like this:"," "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-markup"},'<Application xmlns="https://github.com/avaloniaui"\n             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n             x:Class="ToDoList.App"\n             xmlns:local="using:ToDoList"\n             RequestedThemeVariant="Default">\n             \x3c!-- "Default" ThemeVariant follows system theme variant. "Dark" or "Light" are other available options. --\x3e\n\n    <Application.DataTemplates>\n        <local:ViewLocator/>\n    </Application.DataTemplates>\n  \n    <Application.Styles>\n        <FluentTheme />\n    </Application.Styles>\n</Application>\n')),(0,o.kt)("p",null,"In your to do list app, the main window has had its content set to an object that is not a built-in control, user control or custom control. So ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," searches up the tree of controls for a ",(0,o.kt)("strong",{parentName:"p"},"data template")," that matches the class of the content data."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For more information about the concepts behind data templates, see ",(0,o.kt)("a",{parentName:"p",href:"../../concepts/templates/"},"here"),".")),(0,o.kt)("p",null,"As no other data templates match, the search will eventually reach the ",(0,o.kt)("inlineCode",{parentName:"p"},"ViewLocator")," in the application data templates element. This will run its checks and if they pass, return an instance of the corresponding view. In your app this will be the to do list view."," "),(0,o.kt)("div",{style:{textAlign:"center"}},(0,o.kt)("img",{src:"/img/gitbook-import/assets/image (45).png",alt:""})),(0,o.kt)("p",null,"In this way the content of the main window is set to the correct view, based on the type of the view model and the naming convention."," "),(0,o.kt)("h2",{id:"source-not-framework"},"Source not Framework"),(0,o.kt)("p",null,"Note that the view locator class is included in the project source rather than being part of the ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," framework itself. This is because using an implementation of the 'convention over configuration' paradigm is an architectural choice for the application developer."),(0,o.kt)("p",null,"If you do not want to use the view locator (in a different app); then remove it from the project and the ",(0,o.kt)("strong",{parentName:"p"},"App.axaml")," file."),(0,o.kt)("p",null,"On the next page you will learn how to add revealed functionality and actions to the ",(0,o.kt)("strong",{parentName:"p"},"OK")," and ",(0,o.kt)("strong",{parentName:"p"},"Cancel")," buttons."))}d.isMDXComponent=!0}}]);