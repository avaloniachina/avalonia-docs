"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[79423],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>y});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,y=u["".concat(l,".").concat(d)]||u[d]||p[d]||r;return n?o.createElement(y,s(s({ref:t},m),{},{components:n})):o.createElement(y,s({ref:t},m))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<r;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},42370:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var o=n(87462),a=(n(67294),n(3905));const r=n.p+"assets/images/image (22) (3)-99d0103502f2c6cbcc87b90e07576a3e.png",s=n.p+"assets/images/image (11) (2)-0b4cf55b72e88ec0dade2220eaa2fb58.png",i={id:"how-to-create-a-custom-controls-library",title:"How To Create a Custom Controls Library"},l="How To Create a Custom Controls Library",c={unversionedId:"guides/custom-controls/how-to-create-a-custom-controls-library",id:"guides/custom-controls/how-to-create-a-custom-controls-library",title:"How To Create a Custom Controls Library",description:"This guide shows you how to create a custom controls library and reference it for use in an Avalonia UI app.",source:"@site/docs/guides/custom-controls/how-to-create-a-custom-controls-library.md",sourceDirName:"guides/custom-controls",slug:"/guides/custom-controls/how-to-create-a-custom-controls-library",permalink:"/avalonia-docs/docs/next/guides/custom-controls/how-to-create-a-custom-controls-library",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/guides/custom-controls/how-to-create-a-custom-controls-library.md",tags:[],version:"current",frontMatter:{id:"how-to-create-a-custom-controls-library",title:"How To Create a Custom Controls Library"},sidebar:"documentationSidebar",previous:{title:"Draw with a Property",permalink:"/avalonia-docs/docs/next/guides/custom-controls/draw-with-a-property"},next:{title:"How To Create a Custom Flyout",permalink:"/avalonia-docs/docs/next/guides/custom-controls/how-to-create-a-custom-flyout"}},m={},u=[{value:"XML Namespace Definitions",id:"xml-namespace-definitions",level:2},{value:"Common Namespace Definitions ",id:"common-namespace-definitions-",level:3}],p=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)},d=p("Tabs"),y=p("TabItem"),b={toc:u},f="wrapper";function h(e){let{components:t,...n}=e;return(0,a.kt)(f,(0,o.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"how-to-create-a-custom-controls-library"},"How To Create a Custom Controls Library"),(0,a.kt)("p",null,"This guide shows you how to create a custom controls library and reference it for use in an ",(0,a.kt)("em",{parentName:"p"},"Avalonia UI")," app."),(0,a.kt)("img",{src:r,alt:""}),(0,a.kt)("p",null,"In this example, a custom control file is added to a .NET class library. The library has the ",(0,a.kt)("em",{parentName:"p"},"Avalonia UI")," ",(0,a.kt)("em",{parentName:"p"},"NuGet")," package installed:"),(0,a.kt)("img",{src:s,alt:""}),(0,a.kt)(d,{defaultValue:"xaml",values:[{label:"XAML",value:"xaml"},{label:"C#",value:"cs"}],mdxType:"Tabs"},(0,a.kt)(y,{value:"xaml",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<Window xmlns="https://github.com/avaloniaui"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        xmlns:cc="clr-namespace:CCLibrary;assembly=CCLibrary"\n        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"\n        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"\n        x:Class="AvaloniaCCLib.MainWindow"\n        Title="AvaloniaCCLib">\n  <Window.Styles>\n    <Style Selector="cc|MyCustomControl">\n      <Setter Property="Background" Value="Yellow"/>\n    </Style>\n  </Window.Styles>\n\n  <cc:MyCustomControl Height="200" Width="300"/>\n\n</Window>\n'))),(0,a.kt)(y,{value:"cs",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"using Avalonia;\nusing Avalonia.Controls;\nusing Avalonia.Media;\n\nnamespace CCLibrary\n{\n\n    public class MyCustomControl : Control\n    {\n        public static readonly StyledProperty<IBrush?> BackgroundProperty =\n            Border.BackgroundProperty.AddOwner<MyCustomControl>();\n\n        public IBrush? Background\n        {\n            get { return GetValue(BackgroundProperty); }\n            set { SetValue(BackgroundProperty, value); }\n        }\n\n        public sealed override void Render(DrawingContext context)\n        {\n            if (Background != null)\n            {\n                var renderSize = Bounds.Size;\n                context.FillRectangle(Background, new Rect(renderSize));\n            }\n            base.Render(context);\n        }\n    }\n}\n")))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Notice that the namespace reference for the control library includes the name of the assembly.")),(0,a.kt)("h2",{id:"xml-namespace-definitions"},"XML Namespace Definitions"),(0,a.kt)("p",null,"When you add a reference to a controls library in an ",(0,a.kt)("em",{parentName:"p"},"Avalonia UI")," XAML file, you may want to use the URL identification format. For example:"," "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'xmlns:cc="https://my.controls.url"\n')),(0,a.kt)("p",null,"This is possible because of the presence of XML namespace definitions in a controls library. These map URLs to the code namespaces, and are in the project ",(0,a.kt)("inlineCode",{parentName:"p"},"Properties/AssemblyInfo.cs")," file. For example:"," "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'[assembly: XmlnsDefinition("https://github.com/avaloniaui", "Avalonia")]\n')),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"You can see this in the ",(0,a.kt)("em",{parentName:"p"},"Avalonia UI")," built-in controls source code ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/AvaloniaUI/Avalonia/blob/master/src/Avalonia.Controls/Properties/AssemblyInfo.cs"},"here"),"."," ")),(0,a.kt)("h3",{id:"common-namespace-definitions-"},"Common Namespace Definitions"," "),(0,a.kt)("p",null,"You can also make one URL map several namespaces in your controls library. To do this simply add multiple XML namespace definitions that use the same URL, but map to different code namespaces, like this:"," "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'using Avalonia.Metadata;\n\n[assembly: XmlnsDefinition("https://my.controls.url", "My.NameSpace")]\n[assembly: XmlnsDefinition("https://my.controls.url", "My.NameSpace.Other")]\n')))}h.isMDXComponent=!0}}]);