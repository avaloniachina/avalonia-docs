"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[39311],{28929:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>r});var i=t(85893),a=t(11151);t.p;const o={id:"how-to-bind-can-execute",title:"How to Bind Can Execute"},s="How to Bind Can Execute",c={id:"guides/data-binding/how-to-bind-can-execute",title:"How to Bind Can Execute",description:"Whether a control, that can initiate an action in response to user interaction, is in its enabled state, is an important principle of the 'revealed functionality' part of user experience design (UX). User confidence is reinforced by disabling commands that cannot run. For example where a button or menu item cannot run due to the current state of an application, they should be presented as inactive.",source:"@site/docs/guides/data-binding/how-to-bind-can-execute.md",sourceDirName:"guides/data-binding",slug:"/guides/data-binding/how-to-bind-can-execute",permalink:"/avalonia-docs/docs/guides/data-binding/how-to-bind-can-execute",draft:!1,unlisted:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/guides/data-binding/how-to-bind-can-execute.md",tags:[],version:"current",frontMatter:{id:"how-to-bind-can-execute",title:"How to Bind Can Execute"},sidebar:"documentationSidebar",previous:{title:"How To Bind Image Files",permalink:"/avalonia-docs/docs/guides/data-binding/how-to-bind-image-files"},next:{title:"How to Bind to a Command with ReactiveUI",permalink:"/avalonia-docs/docs/guides/data-binding/how-to-bind-to-a-command-with-reactiveui"}},d={},r=[];function l(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"how-to-bind-can-execute",children:"How to Bind Can Execute"}),"\n",(0,i.jsx)(n.p,{children:"Whether a control, that can initiate an action in response to user interaction, is in its enabled state, is an important principle of the 'revealed functionality' part of user experience design (UX). User confidence is reinforced by disabling commands that cannot run. For example where a button or menu item cannot run due to the current state of an application, they should be presented as inactive."}),"\n",(0,i.jsxs)(n.p,{children:["This example assumes that you are using the MVVM implementation pattern with the ",(0,i.jsx)(n.em,{children:"ReactiveUI"})," framework. This (recommended) approach gives a very clear separation between the view and the view model."]}),"\n",(0,i.jsx)(n.p,{children:"In this example, the button can only be clicked when the message is not empty. As soon as the output is shown; the message is reset to the empty string - which in turn will disable the button again."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",metastring:"title='XAML'",children:'<StackPanel Margin="20">\n  <TextBox Margin="0 5" Text="{Binding Message}"\n           Watermark="Add a message to enable the button"/>\n  <Button Command="{Binding ExampleCommand}">    \n    Run the example\n  </Button>\n  <TextBlock Margin="0 5" Text="{Binding Output}" />\n</StackPanel>\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",metastring:"title='MainWindowViewModel.cs'",children:'namespace AvaloniaGuides.ViewModels\n{\n    public class MainWindowViewModel : ViewModelBase\n    {\n        private string _message = string.Empty;\n        private string _output = "Waiting...";\n\n        public string Message \n        { \n            get => _message; \n            set => this.RaiseAndSetIfChanged(ref _message, value); \n        }\n\n        public string Output\n        {\n            get => _output;\n            set => this.RaiseAndSetIfChanged(ref _output, value);\n        }\n\n        public ReactiveCommand<Unit, Unit> ExampleCommand { get; }\n\n        public MainWindowViewModel()\n        {\n            var isValidObservable = this.WhenAnyValue(\n                x => x.Message,\n                x => !string.IsNullOrWhiteSpace(x));\n            ExampleCommand = ReactiveCommand.Create(PerformAction, \n                                                    isValidObservable);\n        }\n\n        private void PerformAction()\n        {\n             Output = $"The action was called. {_message}";\n             Message = String.Empty;\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",metastring:"title='ViewModelBase.cs'",children:"using ReactiveUI;\n\nnamespace AvaloniaGuides.ViewModels\n{\n    public class ViewModelBase : ReactiveObject\n    {\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In the constructor of the view model, the reactive command is created with two parameters. The first is the private method that performs the action. The second is an observable which is created by the ",(0,i.jsx)(n.code,{children:"WhenAnyValue"})," method of the ",(0,i.jsx)(n.code,{children:"ReactiveObject"})," that underlies the view model (from the ",(0,i.jsx)(n.code,{children:"ViewModelBase"})," class)."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ViewModelBase"})," class is added to your project when you use the 'Avalonia MVVM Application' solution template."]})}),"\n",(0,i.jsxs)(n.p,{children:["Here the ",(0,i.jsx)(n.code,{children:"WhenAnyValue"})," method takes two arguments, the first collects a value for the parameter of the validation function, and the second is the validation function that returns a Boolean result."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"WhenAnyValue"})," method actually has overloads that can take up to 10 different value getters (for the validation function parameters), plus the validation function itself."]})}),"\n",(0,i.jsx)("img",{src:"{BindCanExecuteScreenshot}",alt:""})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>s});var i=t(67294);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);