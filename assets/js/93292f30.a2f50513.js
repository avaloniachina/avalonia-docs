"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[80008],{38022:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>d,toc:()=>c});var n=o(85893),i=o(11151),a=o(48917);const s={description:"TUTORIALS - To Do List App"},l="Create a View Model",d={id:"tutorials/todo-list-app/creating-a-view-model",title:"Create a View Model",description:"TUTORIALS - To Do List App",source:"@site/docs/tutorials/todo-list-app/creating-a-view-model.md",sourceDirName:"tutorials/todo-list-app",slug:"/tutorials/todo-list-app/creating-a-view-model",permalink:"/avalonia-docs/docs/tutorials/todo-list-app/creating-a-view-model",draft:!1,unlisted:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/tutorials/todo-list-app/creating-a-view-model.md",tags:[],version:"current",frontMatter:{description:"TUTORIALS - To Do List App"},sidebar:"documentationSidebar",previous:{title:"Create a Model",permalink:"/avalonia-docs/docs/tutorials/todo-list-app/creating-a-model"},next:{title:"Data Binding",permalink:"/avalonia-docs/docs/tutorials/todo-list-app/wiring-up-the-views"}},r={},c=[{value:"Separation in MVVM",id:"separation-in-mvvm",level:2},{value:"View Model to Model Dependency",id:"view-model-to-model-dependency",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"create-a-view-model",children:"Create a View Model"}),"\n",(0,n.jsxs)(t.p,{children:["On this page, you will learn how to create a view model to provide the application logic for your app. This is the final part of the MVVM pattern, and it will make use of the ",(0,n.jsx)(t.em,{children:"ReactiveUI"})," framework."]}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["To review the concepts behind MVVM pattern programming using ReactiveUI, see ",(0,n.jsx)(t.a,{href:"../../concepts/reactiveui/",children:"here"}),"."]})}),"\n",(0,n.jsx)(t.p,{children:"The purpose of the view model is organise data and actions for the application in a way that suits the views. For reasons that will become clear in a future step of this tutorial, you will adopt the convention of naming a view model after the view that it supports in this way."}),"\n",(0,n.jsx)(t.p,{children:"Follow this procedure to add the to do list view model to your app:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Locate the ",(0,n.jsx)(t.strong,{children:"ViewModels"})," folder and add a new class."]}),"\n",(0,n.jsx)(t.li,{children:"Name the new class 'ToDoListViewModel'."}),"\n",(0,n.jsx)(t.li,{children:"Add the following code:"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",children:"using System.Collections.Generic;\nusing System.Collections.ObjectModel;\nusing ToDoList.DataModel;\n\nnamespace ToDoList.ViewModels\n{\n    public class ToDoListViewModel : ViewModelBase\n    {\n        public ToDoListViewModel(IEnumerable<ToDoItem> items)\n        {\n            ListItems = new ObservableCollection<ToDoItem>(items);\n        }\n\n        public ObservableCollection<ToDoItem> ListItems { get; }\n    }\n}\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Your view model is very simple at this stage. Its constructor takes a collection of to do item data models and keeps them in an observable collection . This is publicly available through the ",(0,n.jsx)(t.code,{children:"ListItems"})," property here on the view model."]}),"\n",(0,n.jsxs)(t.p,{children:["The view model derives from the base class  ",(0,n.jsx)(t.code,{children:"ViewModelBase"})," that was created by the solution template. More about this later in the tutorial."]}),"\n",(0,n.jsx)(t.h2,{id:"separation-in-mvvm",children:"Separation in MVVM"}),"\n",(0,n.jsx)(t.p,{children:"You have seen that the to do list view model has a constructor that requires a collection of to do item data models to be provided as the parameter.  In turn this collection will be retrieved from the fake data service (model) at some point."}),"\n",(0,n.jsx)(t.p,{children:"Before you start to populate the view model with data, have another look at the MVVM pattern:"}),"\n",(0,n.jsx)("img",{className:"center",src:a.Z,alt:""}),"\n",(0,n.jsx)(t.p,{children:"The stated purpose of the pattern is to separate the view and view model so that, for example, the view model may be independently tested. This removes the dependency between the view and view model."}),"\n",(0,n.jsx)(t.p,{children:"In a real application, you would aim to ensure separation between the view model and the model, for similar reasons. However this is beyond the scope of this tutorial, so here you will make the view model dependent on the model."}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["Separation of the view model and the model in the MVVM pattern can be achieved by Dependency Injection (DI). For guidance on how to use DI with MVVM and ",(0,n.jsx)(t.em,{children:"Avalonia UI"}),", see ",(0,n.jsx)(t.a,{href:"/avalonia-docs/docs/guides/implementation-guides/how-to-implement-dependency-injection",children:"here"}),"."]})}),"\n",(0,n.jsx)(t.h2,{id:"view-model-to-model-dependency",children:"View Model to Model Dependency"}),"\n",(0,n.jsx)(t.p,{children:"Follow this procedure to make the main window view model depend on the model, that is dependent on the to do list data service:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Locate the ",(0,n.jsx)(t.strong,{children:"MainWindowViewModel"})," class file, in the ",(0,n.jsx)(t.strong,{children:"ViewModels"})," folder."]}),"\n",(0,n.jsx)(t.li,{children:"Alter the code as follows:"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",children:"using ToDoList.Services;\n\nnamespace ToDoList.ViewModels\n{\n    public class MainWindowViewModel : ViewModelBase\n    {\n        //this has a dependency on the ToDoListService\n\n        public MainWindowViewModel()\n        {\n            var service = new ToDoListService();\n            ToDoList = new ToDoListViewModel(service.GetItems());\n        }\n\n        public ToDoListViewModel ToDoList { get; }\n    }\n}\n"})}),"\n",(0,n.jsx)(t.p,{children:"On the next page you will learn how to connect the views to the view models using data binding."})]})}function p(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},48917:(e,t,o)=>{o.d(t,{Z:()=>n});const n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc4AAACDCAMAAAAziQuEAAAAOVBMVEX////u7u7Nzc2dnZ1wcHB+fn7BwcH9/f1sbGz6+vqKioo6OjoRERGmpqbf39+ysrJfX19QUFBvb285+Y1CAAAHp0lEQVR42u1di5aiOhDMYxM0HfPg/z/2dgd1dI6ueEEebtUZHc8MStFFpZNGEqUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYIPolsAeOHbfEEhfD59HMdMiFcoCHMM0jmYBjofqX8l5WqAFsBPldPrzHLWb5k1jFwjkCXIuI6eCnFuSs4M74U64E+6EnHAn5IQ74U64E+6EO+FOyAl3Qk64E+6EO9+Q01+fzkhpc+5slO54ebjzoZxdlOd4q9cllmUz7myUnPvNWoSrcOcdrnKmRs8kCZvxLBqJT/wW3Pkjp08DKSHs+Ug8Nc5w5+15zk+eqJBWxHCKSh+9jaRs7KPZjjuJ+mhVjoWEsCNSFK1m4gXuvHen598lWI4LueSG4CkdtfJ1O+4kq1JU5IWt9Y02tX+SgTvv3dkrFZwbhMyVosjpI5s1bsid3KoSCyqEtaPm0dagRAd3nt3J8nCExISsJovaO88ne3PnkJnWd2dgWsxLfMmOZMaaPcpEmpw18wFouHM4k0v1vvZsRG9iStH76CxpL+4M/KNLWd+dKVpO5UlRZU+qvqQSpeF1IqfJZNJ9gv+nq0KBWDeOS5HT3NQ+e+WoN1llSrqn3/KtUhUy3Nth3tRTz7t3NTtmWrNNukhq+P2lOlSFWru69aoQ+XHvh5ym346cT2u2/cgCJeQcDdRsIedM7hyLXck5FN60eVErX1TOMyf/iJMxP8+XI710WdN67hyKmulWFHM+Nm2WdGeUIIRi7Ybc2YYK9iEnkqGtjvS7FKXuy+pLu9M1yndVkktXa1S/cDY52x05Q11L+43I+Ue6UpQfcaLI0bWV5D9a/VTQ0zM5p7nzOFpOppzqhYqQEzmlnr+snIYpmFas5AEipdArG+8vcn1ITk9ZP5FTSm/8YE6tbG97leNQcuLRYlWqWmq180sFPTFz9xF3lj9mnJw9EwwcOUOFqSShxYqWWheWU5zZB46FxDDXRKpE48u494YJdx3WGOOzrhA7U84v5qSFU1R99MPVSPJR84lPkiSuFfRqJWk8c+eUOyMpxjJKTleNIn2mYvg9OnopJxa7sJy8Uw6ac61EzmHSMYTejnXn/79B9S/u5Lwpcp05RamUWxfsICen1CBytjMxttzZtvJP3TnhLto61p3O9qkMNWCWUBpaZhqlnr+wnDrmInxkt9wL6/tqatSfb2zFOU8HKtHUKyfPZxwlojTImWtNZzljOlfQjXQkV82dTsc+q4EKNx5ZnrnR4+72wnKqIueS8LFStDTc14h17XFnkYDIhZiQSs+cgiLqzv3F2K7O1D/pWkEPlLgNXrVn61RtXQ5Xk43acidELkAYuQyxsJymfdHCq9RL+Vy51K7mritnOnPSzEk3TnngZNurxLkp/FTQuatbjGy+2riT9+15u4EKNyOZAjP1ciUi2WXl3ElVqHvwClWhf63Ih5rtV8kJd8KdcCfcCTnhTsgJd8KdcCfcCXfCnZAT7oSccCfcCXfCnZAT7oSccCfkhDvhTrgT7oSccCfkhDshJ9wJd8KdcCfkhDsh50bk3Io765/PY/IKgYd391jfPqzD1BUC/2cgD++87+UKger4LhLpt98zMa+9vb9jzvJc7HIk3w/kOZxuQY6P/Bzfvpl+6kqn739AllvsNR0W5LhSzp4a2Tr6PsC1kWPUCniRyIrdPsk2BY0uh9VMN96dZm0G3Q6MmffijpUbW3U8qb3IeTKQ86Wchx3IOazhbncg53Hltu4YdiDnMFPbHuTUSQHInbO5M+9Gzozc+Tot7SB3dlrvpLE9M13RnW4H7tyNnEqj0oHcOaM7zW7kNFMvzEmv0950PWV+p5mv1mHcOQJmloFKm974ulRDlRXvTJzX993aA5UPyulnNH43i5xhkNN7rZLMoqoDGZHXzGbRrlu5jjDL7p1c7LhOK5jaxLQ9zVbcHxrbiZHqYpJljryqxUUjizDFVKKlLNNvfk1jm+aRs97I6dsxkVfzypkmUpVJNpmV0LRV1hZtC5DZMixQhtx5I6fjk5xjk4j4BUXrXB+pL7Jm4BzNtp8hd8pKhhSoTWgsywIOa462mXHnS3jaf4ecJmqZbzaoxC/aFO3kpRGL84Vqcu6Uueajl3mZM13dqYoj9TU46nnkVK5eJvf2FzlVsWaWUA2N7cQheltnNEQ+yYJMDE1OD3L6OOMF/NUb27nklMX3fsuZa283I6dqkQ6JQ+5keQxZArjNIjznd1a+JXfKYh4k67NIq9uf5eSxgZ5Pzs8U+Uwoc5YR8jfI2ZYm4g6iLpEMd4gc/0EW4+vnDNVn5LT1m8qsx4+WMeo8Hb3mzi7t4NKwXv3bAJ8rYySa6Uufs5QRlpHzm2u2c8X/k7lzZjntF8s5c5YzCnhlIL8DkoM7/R7cecIpNVLOPWD13Ol2I+cucufKPVvkzu/KnVmF4Pkhv606haAyPww/Ughah5D4H+a8wem6gb/ZoLvdwPKnXDYw5w2Owwb+0QbH9GiD090GwzdAsrn5a3fD7iV9/w79pxuMor/dtND9/OoeDj2ejEOejg+7sR/ytwFOd78s2fPBaPdqZy+HUd3dof/Q7558SIfWAQAAAAAAAAAAAAAAAAAAAAAAAACAfxT/Acvody1QNpaoAAAAAElFTkSuQmCC"},11151:(e,t,o)=>{o.d(t,{Z:()=>l,a:()=>s});var n=o(67294);const i={},a=n.createContext(i);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);