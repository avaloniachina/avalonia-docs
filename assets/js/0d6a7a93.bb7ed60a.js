"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[95960],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>v});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=l,v=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return n?a.createElement(v,o(o({ref:t},c),{},{components:n})):a.createElement(v,o({ref:t},c))}));function v(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,o=new Array(r);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:l,o[1]=i;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},33661:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var a=n(87462),l=(n(67294),n(3905));const r={description:"CONCEPTS"},o="The TopLevel",i={unversionedId:"concepts/toplevel",id:"concepts/toplevel",title:"The TopLevel",description:"CONCEPTS",source:"@site/docs/concepts/toplevel.md",sourceDirName:"concepts",slug:"/concepts/toplevel",permalink:"/avalonia-docs/docs/next/concepts/toplevel",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/concepts/toplevel.md",tags:[],version:"current",frontMatter:{description:"CONCEPTS"},sidebar:"documentationSidebar",previous:{title:"Unhandled Exceptions",permalink:"/avalonia-docs/docs/next/concepts/unhandledexceptions"},next:{title:"The View Locator",permalink:"/avalonia-docs/docs/next/concepts/view-locator"}},s={},p=[{value:"Getting the TopLevel",id:"getting-the-toplevel",level:2},{value:"Using TopLevel.GetTopLevel",id:"using-toplevelgettoplevel",level:3},{value:"Using the Window Class",id:"using-the-window-class",level:3},{value:"Common Properties",id:"common-properties",level:2},{value:"ActualTransparencyLevel",id:"actualtransparencylevel",level:3},{value:"ClientSize",id:"clientsize",level:3},{value:"Clipboard",id:"clipboard",level:3},{value:"FocusManager",id:"focusmanager",level:3},{value:"FrameSize",id:"framesize",level:3},{value:"InsetsManager",id:"insetsmanager",level:3},{value:"PlatformSettings",id:"platformsettings",level:3},{value:"RendererDiagnostics",id:"rendererdiagnostics",level:3},{value:"RenderScaling",id:"renderscaling",level:3},{value:"RequestedThemeVariant",id:"requestedthemevariant",level:3},{value:"StorageProvider",id:"storageprovider",level:3},{value:"TransparencyBackgroundFallback",id:"transparencybackgroundfallback",level:3},{value:"TransparencyLevelHint",id:"transparencylevelhint",level:3},{value:"Common Events",id:"common-events",level:2},{value:"BackRequested",id:"backrequested",level:3},{value:"Closed",id:"closed",level:3},{value:"Opened",id:"opened",level:3},{value:"ScalingChanged",id:"scalingchanged",level:3},{value:"Common Methods",id:"common-methods",level:2},{value:"GetTopLevel",id:"gettoplevel",level:3},{value:"Parameters",id:"parameters",level:4},{value:"RequestAnimationFrame",id:"requestanimationframe",level:3},{value:"RequestPlatformInhibition",id:"requestplatforminhibition",level:3},{value:"TryGetPlatformHandle",id:"trygetplatformhandle",level:3},{value:"More Information",id:"more-information",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,l.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"the-toplevel"},"The TopLevel"),(0,l.kt)("p",null,"The TopLevel act as the visual root, and is the base class for all top level controls, eg. ",(0,l.kt)("inlineCode",{parentName:"p"},"Window"),". It handles scheduling layout, styling and rendering as well as keeping track of the client size. Most services are accessed through the TopLevel."),(0,l.kt)("h2",{id:"getting-the-toplevel"},"Getting the TopLevel"),(0,l.kt)("p",null,"Here are two common ways to access TopLevel instance."),(0,l.kt)("h3",{id:"using-toplevelgettoplevel"},"Using TopLevel.GetTopLevel"),(0,l.kt)("p",null,"You can use the static ",(0,l.kt)("inlineCode",{parentName:"p"},"GetTopLevel")," method of the TopLevel class to get the top-level control that contains the current control."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"var topLevel = TopLevel.GetTopLevel(control);\n// Here you can reference various services like Clipboard or StorageProvider from topLevel instance.\n")),(0,l.kt)("p",null,"This method can be helpful if you're working within a user control or a lower-level component and need access to the TopLevel services."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"If ",(0,l.kt)("inlineCode",{parentName:"p"},"TopLevel.GetTopLevel")," returns null, likely control is not yet attached to the root. To ensure control is attached, you should handle ",(0,l.kt)("inlineCode",{parentName:"p"},"Control.Loaded")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"Control.Unloaded")," events and keep track of current top level from these events.")),(0,l.kt)("h3",{id:"using-the-window-class"},"Using the Window Class"),(0,l.kt)("p",null,"Since the",(0,l.kt)("inlineCode",{parentName:"p"},"Window")," class inherits from ",(0,l.kt)("inlineCode",{parentName:"p"},"TopLevel"),", you can directly access services from an instance of ",(0,l.kt)("inlineCode",{parentName:"p"},"Window"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"var topLevel = window;\n")),(0,l.kt)("p",null,"This method is typically used when you're already working within the context of a window, such as in a ViewModel or an event handler within the ",(0,l.kt)("inlineCode",{parentName:"p"},"Window")," class."),(0,l.kt)("h2",{id:"common-properties"},"Common Properties"),(0,l.kt)("h3",{id:"actualtransparencylevel"},"ActualTransparencyLevel"),(0,l.kt)("p",null,"Gets the achieved ",(0,l.kt)("inlineCode",{parentName:"p"},"WindowTransparencyLevel")," that the platform was able to provide."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"WindowTransparencyLevel ActualTransparencyLevel { get; }\n")),(0,l.kt)("h3",{id:"clientsize"},"ClientSize"),(0,l.kt)("p",null,"Gets the client size of the window."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"Size ClientSize { get; }\n")),(0,l.kt)("h3",{id:"clipboard"},"Clipboard"),(0,l.kt)("p",null,"Gets the platform's ",(0,l.kt)("a",{parentName:"p",href:"./services/clipboard"},"Clipboard")," implementation."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IClipboard? Clipboard { get; }\n")),(0,l.kt)("h3",{id:"focusmanager"},"FocusManager"),(0,l.kt)("p",null,"Gets ",(0,l.kt)("a",{parentName:"p",href:"./services/focus-manager"},"focus manager")," of the root."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IFocusManager? FocusManager { get; }\n")),(0,l.kt)("h3",{id:"framesize"},"FrameSize"),(0,l.kt)("p",null,"Gets the total size of the top level including system frame if presented."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"Size? FrameSize { get; }\n")),(0,l.kt)("h3",{id:"insetsmanager"},"InsetsManager"),(0,l.kt)("p",null,"Gets the platform's ",(0,l.kt)("a",{parentName:"p",href:"./services/insets-manager"},"InsetsManager")," implementation."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IInsetsManager? InsetsManager { get; }\n")),(0,l.kt)("h3",{id:"platformsettings"},"PlatformSettings"),(0,l.kt)("p",null,"Represents a contract for accessing top-level ",(0,l.kt)("a",{parentName:"p",href:"./services/platform-settings"},"platform-specific settings"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IPlatformSettings? PlatformSettings { get; }\n")),(0,l.kt)("h3",{id:"rendererdiagnostics"},"RendererDiagnostics"),(0,l.kt)("p",null,"Gets a value indicating whether the renderer should draw specific diagnostics."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"RendererDiagnostics RendererDiagnostics { get; }\n")),(0,l.kt)("h3",{id:"renderscaling"},"RenderScaling"),(0,l.kt)("p",null,"Gets the scaling factor to use in rendering."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"double RenderScaling { get; }\n")),(0,l.kt)("h3",{id:"requestedthemevariant"},"RequestedThemeVariant"),(0,l.kt)("p",null,"Gets or sets the UI theme variant that is used by the control (and its child elements) for resource determination. The UI theme you specify with ThemeVariant can override the app-level ThemeVariant."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"ThemeVariant? RequestedThemeVariant { get; set; }\n")),(0,l.kt)("h3",{id:"storageprovider"},"StorageProvider"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"./services/storage-provider/"},"File System storage")," service used for file pickers and bookmarks."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IStorageProvider StorageProvider { get; }\n")),(0,l.kt)("h3",{id:"transparencybackgroundfallback"},"TransparencyBackgroundFallback"),(0,l.kt)("p",null,"Gets or sets the ",(0,l.kt)("inlineCode",{parentName:"p"},"IBrush")," that transparency will blend with when transparency is not supported. By default this is a solid white brush."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IBrush TransparencyBackgroundFallback { get; set; }\n")),(0,l.kt)("h3",{id:"transparencylevelhint"},"TransparencyLevelHint"),(0,l.kt)("p",null,"Gets or sets the ",(0,l.kt)("inlineCode",{parentName:"p"},"WindowTransparencyLevel"),' that the TopLevel should use when possible. Accepts multiple values which are applied in a fallback order. For instance, with "Mica, Blur" Mica will be applied only on platforms where it is possible, and Blur will be used on the rest of them. Default value is an empty array or "None".   '),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IReadOnlyList<WindowTransparencyLevel> TransparencyLevelHint { get; set; }\n")),(0,l.kt)("h2",{id:"common-events"},"Common Events"),(0,l.kt)("h3",{id:"backrequested"},"BackRequested"),(0,l.kt)("p",null,"Occurs when physical Back Button is pressed or a back navigation has been requested."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"event EventHandler<RoutedEventArgs> BackRequested { add; remove; }\n")),(0,l.kt)("h3",{id:"closed"},"Closed"),(0,l.kt)("p",null,"Fired when the window is closed."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"event EventHandler Closed;\n")),(0,l.kt)("h3",{id:"opened"},"Opened"),(0,l.kt)("p",null,"Fired when the window is opened."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"event EventHandler Opened;\n")),(0,l.kt)("h3",{id:"scalingchanged"},"ScalingChanged"),(0,l.kt)("p",null,"Occurs when the TopLevel's scaling changes."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"event EventHandler ScalingChanged;\n")),(0,l.kt)("h2",{id:"common-methods"},"Common Methods"),(0,l.kt)("h3",{id:"gettoplevel"},"GetTopLevel"),(0,l.kt)("p",null,"Gets the ",(0,l.kt)("inlineCode",{parentName:"p"},"TopLevel")," for which the given ",(0,l.kt)("inlineCode",{parentName:"p"},"Visual")," is hosted in."),(0,l.kt)("h4",{id:"parameters"},"Parameters"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"control"),"\nThe visual to query its TopLevel"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"static TopLevel? GetTopLevel(Visual? visual)\n")),(0,l.kt)("h3",{id:"requestanimationframe"},"RequestAnimationFrame"),(0,l.kt)("p",null,"Enqueues a callback to be called on the next animation tick"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"void RequestAnimationFrame(Action<TimeSpan> action)\n")),(0,l.kt)("h3",{id:"requestplatforminhibition"},"RequestPlatformInhibition"),(0,l.kt)("p",null,"Requests a ",(0,l.kt)("inlineCode",{parentName:"p"},"PlatformInhibitionType")," to be inhibited. The behavior remains inhibited until the return value is disposed. The available set of ",(0,l.kt)("inlineCode",{parentName:"p"},"PlatformInhibitionType"),"s depends on the platform. If a behavior is inhibited on a platform where this type is not supported the request will have no effect."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"async Task<IDisposable> RequestPlatformInhibition(PlatformInhibitionType type, string reason)\n")),(0,l.kt)("h3",{id:"trygetplatformhandle"},"TryGetPlatformHandle"),(0,l.kt)("p",null,"Tries to get the platform handle for the TopLevel-derived control."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cs"},"IPlatformHandle? TryGetPlatformHandle()\n")),(0,l.kt)("h2",{id:"more-information"},"More Information"),(0,l.kt)("p",null,"View the source code on ",(0,l.kt)("em",{parentName:"p"},"GitHub")," ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/AvaloniaUI/Avalonia/blob/master/src/Avalonia.Controls/TopLevel.cs"},(0,l.kt)("inlineCode",{parentName:"a"},"TopLevel.cs"))))}u.isMDXComponent=!0}}]);