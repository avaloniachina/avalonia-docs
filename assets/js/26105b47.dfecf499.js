"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[70866],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),d=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),c=d(n),h=o,u=c["".concat(s,".").concat(h)]||c[h]||m[h]||a;return n?i.createElement(u,l(l({ref:t},p),{},{components:n})):i.createElement(u,l({ref:t},p))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,l=new Array(a);l[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[c]="string"==typeof e?e:o,l[1]=r;for(var d=2;d<a;d++)l[d]=n[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},10912:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var i=n(87462),o=(n(67294),n(3905));const a={description:"TUTORIALS - To Do List App"},l="Navigate Views",r={unversionedId:"tutorials/todo-list-app/navigate-views",id:"tutorials/todo-list-app/navigate-views",title:"Navigate Views",description:"TUTORIALS - To Do List App",source:"@site/docs/tutorials/todo-list-app/navigate-views.md",sourceDirName:"tutorials/todo-list-app",slug:"/tutorials/todo-list-app/navigate-views",permalink:"/avalonia-docs/docs/next/tutorials/todo-list-app/navigate-views",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/tutorials/todo-list-app/navigate-views.md",tags:[],version:"current",frontMatter:{description:"TUTORIALS - To Do List App"},sidebar:"documentationSidebar",previous:{title:"Add New Items",permalink:"/avalonia-docs/docs/next/tutorials/todo-list-app/adding-new-items"},next:{title:"The View Locator",permalink:"/avalonia-docs/docs/next/tutorials/todo-list-app/locating-views"}},s={},d=[{value:"Main Window Content Binding",id:"main-window-content-binding",level:2},{value:"Button Command",id:"button-command",level:2},{value:"Run the Application",id:"run-the-application",level:2}],p={toc:d},c="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"navigate-views"},"Navigate Views"),(0,o.kt)("p",null,"On this page you will learn how to change the view in the content zone of the main window to display the new item view, when the user clicks ",(0,o.kt)("strong",{parentName:"p"},"Add Item"),"."),(0,o.kt)("div",{style:{textAlign:"center"}},(0,o.kt)("img",{src:"/img/gitbook-import/assets/image (40).png",alt:""})),(0,o.kt)("p",null,"Up to this point, you have used the MVVM pattern for this tutorial app. This means that the application logic is controlled from the view models, and the view model in charge of what appears in the main window is the main window view model."),(0,o.kt)("p",null,"Therefore to start with, follow this procedure to add a method to the main window view model that will change what is loaded in the main window content zone:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Stop the app if it is running."),(0,o.kt)("li",{parentName:"ul"},"Locate the ",(0,o.kt)("strong",{parentName:"li"},"MainWindowViewModel.cs")," file in the ",(0,o.kt)("strong",{parentName:"li"},"/ViewModels")," folder."),(0,o.kt)("li",{parentName:"ul"},"Edit the code as shown."," ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},"using ReactiveUI;\nusing ToDoList.Services;\n\nnamespace ToDoList.ViewModels\n{\n    public class MainWindowViewModel : ViewModelBase\n    {\n        private ViewModelBase _contentViewModel;\n\n        //this has a dependency on the ToDoListService\n\n        public MainWindowViewModel()\n        {\n            var service = new ToDoListService();\n            ToDoList = new ToDoListViewModel(service.GetItems());\n            _contentViewModel = ToDoList;\n        }\n\n        public ToDoListViewModel ToDoList { get; }\n        \n        public ViewModelBase ContentViewModel\n        {\n            get => _contentViewModel;\n            private set => this.RaiseAndSetIfChanged(ref _contentViewModel, value);\n        }\n\n        public void AddItem()\n        {\n            ContentViewModel = new AddItemViewModel();\n        }\n    }\n}\n")),(0,o.kt)("p",null,"Take some time to examine the code you just added. There is a new ",(0,o.kt)("inlineCode",{parentName:"p"},"ContentViewModel")," property that can get and set the view model in the main window content zone. This is initially set in the constructor to be the to do list view model, with to do list data provided from the service."," "),(0,o.kt)("p",null,"There is also now a new ",(0,o.kt)("inlineCode",{parentName:"p"},"AddItem()")," method that can reassign the content to be the add item view model."),(0,o.kt)("p",null,"Notice that the ",(0,o.kt)("inlineCode",{parentName:"p"},"ContentViewModel")," property set calls ",(0,o.kt)("inlineCode",{parentName:"p"},"RaiseAndSetIfChanged")," which will cause a notification to be generated every time the property changes value. The ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," binding system requires change notifications like this so it knows when to update the user interface."),(0,o.kt)("h2",{id:"main-window-content-binding"},"Main Window Content Binding"),(0,o.kt)("p",null,"Now that you have passed control of what is shown in the main window over to the main window view model (in accordance with the MVVM pattern), you need to complete the link by changing the main window content to use a binding."," "),(0,o.kt)("p",null,"Follow this procedure:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Locate the ",(0,o.kt)("strong",{parentName:"li"},"MainWindow.axaml")," file in the ",(0,o.kt)("strong",{parentName:"li"},"/Views")," folder."),(0,o.kt)("li",{parentName:"ul"},"Edit the XAML as shown."," ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-markup"},'<Window xmlns="https://github.com/avaloniaui"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        xmlns:vm="using:ToDoList.ViewModels"\n        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"\n        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n        mc:Ignorable="d" d:DesignWidth="250" d:DesignHeight="450"\n        x:Class="ToDoList.Views.MainWindow"\n        x:DataType="vm:MainWindowViewModel"\n        Icon="/Assets/avalonia-logo.ico"\n        Title="Avalonia To Do List"\n        Content="{Binding ContentViewModel}">\n</Window>\n')),(0,o.kt)("div",{style:{textAlign:"center"}},(0,o.kt)("img",{src:"/img/gitbook-import/assets/image (38) (2).png",alt:""})),(0,o.kt)("h2",{id:"button-command"},"Button Command"),(0,o.kt)("p",null,"Lastly, to make the add item button call the ",(0,o.kt)("inlineCode",{parentName:"p"},"AddItem()")," method, follow this procedure: "," "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Locate the ",(0,o.kt)("strong",{parentName:"li"},"ToDoListView.axaml")," file in the ",(0,o.kt)("strong",{parentName:"li"},"/Views")," folder."),(0,o.kt)("li",{parentName:"ul"},"Edit the XAML for the button as shown:"," ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-markup"},'<Button DockPanel.Dock="Bottom"\n        HorizontalAlignment="Stretch"\n        HorizontalContentAlignment="Center"\n        x:CompileBindings="False"\n        Command="{Binding $parent[Window].DataContext.AddItem}">Add Item\n</Button>\n')),(0,o.kt)("p",null,"Take some time to examine the binding that you added to the button."," "),(0,o.kt)("p",null,"Firstly, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Command")," property defines a method to be called whenever the button is clicked."," "),(0,o.kt)("p",null,"Then the binding gives the exact ",(0,o.kt)("strong",{parentName:"p"},"binding path")," to the method using a binding source expression:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$parent[Window].DataContext.AddItem\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"binding source expression")," redirects the source of the binding. The ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," binding system will use the source in the expression, instead of the control's data context."," "),(0,o.kt)("p",null,"In this case the expression is looking for any parent of the control with the type ",(0,o.kt)("inlineCode",{parentName:"p"},"Window"),". It will then use that control's data context to call the ",(0,o.kt)("inlineCode",{parentName:"p"},"AddItem")," method."," "),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For information about the concept of binding source expressions, see ",(0,o.kt)("a",{parentName:"p",href:"../../basics/data/data-binding/data-binding-syntax"},"here"),".")),(0,o.kt)("h2",{id:"run-the-application"},"Run the Application"),(0,o.kt)("p",null,"Now If you run the application and click ",(0,o.kt)("strong",{parentName:"p"},"Add Item"),", you will see the new view appear."),(0,o.kt)("div",null,(0,o.kt)("div",{style:{textAlign:"center"}},(0,o.kt)("img",{src:"/img/gitbook-import/assets/image (43) (1).png",alt:""})),(0,o.kt)("div",{style:{textAlign:"center"}},(0,o.kt)("img",{src:"/img/gitbook-import/assets/image (21) (1).png",alt:""}))),(0,o.kt)("p",null,"Have noticed something about this behaviour? The main window swaps the view model bound to  its content zone, and the display correctly loads the add item view!"," "),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"In ",(0,o.kt)("em",{parentName:"p"},"Avalonia UI")," you can call a simple method on the view model directly like this. You will see later in this tutorial a scenario where you must use a different implementation. "," ")),(0,o.kt)("p",null,"On the next page you will learn how this is happening due to the presence of the view locator."," "))}m.isMDXComponent=!0}}]);