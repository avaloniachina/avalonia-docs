"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[3570],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>v});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=m(n),d=r,v=p["".concat(l,".").concat(d)]||p[d]||u[d]||i;return n?a.createElement(v,o(o({ref:t},s),{},{components:n})):a.createElement(v,o({ref:t},s))}));function v(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[p]="string"==typeof e?e:r,o[1]=c;for(var m=2;m<i;m++)o[m]=n[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},994:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>m});var a=n(87462),r=(n(67294),n(3905));const i={description:"CONCEPTS - ReactiveUI"},o="Reactive Command",c={unversionedId:"concepts/reactiveui/reactive-command",id:"concepts/reactiveui/reactive-command",title:"Reactive Command",description:"CONCEPTS - ReactiveUI",source:"@site/docs/concepts/reactiveui/reactive-command.md",sourceDirName:"concepts/reactiveui",slug:"/concepts/reactiveui/reactive-command",permalink:"/avalonia-docs/docs/next/concepts/reactiveui/reactive-command",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/concepts/reactiveui/reactive-command.md",tags:[],version:"current",frontMatter:{description:"CONCEPTS - ReactiveUI"},sidebar:"documentationSidebar",previous:{title:"Command Update",permalink:"/avalonia-docs/docs/next/concepts/reactiveui/command-update"},next:{title:"View Activation",permalink:"/avalonia-docs/docs/next/concepts/reactiveui/view-activation"}},l={},m=[{value:"Revealed Functionality",id:"revealed-functionality",level:2},{value:"Reactive Command ",id:"reactive-command-",level:2},{value:"Can Execute?",id:"can-execute",level:2}],s={toc:m},p="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"reactive-command"},"Reactive Command"),(0,r.kt)("p",null,"On this page you will learn how to use the ",(0,r.kt)("em",{parentName:"p"},"ReactiveUI")," ",(0,r.kt)("inlineCode",{parentName:"p"},"ReactiveCommand")," and an ",(0,r.kt)("inlineCode",{parentName:"p"},"ObservableObject")," created in code, to implement the UI principle of revealed functionality."," "),(0,r.kt)("h2",{id:"revealed-functionality"},"Revealed Functionality"),(0,r.kt)("p",null,"This is a very important principle that ensures that a user is properly guided through your UI because features and functions only become available (or even visible) once they are valid. "," "),(0,r.kt)("p",null,"As a simple example: an input requires at least 8 characters before a button can be clicked, so it is proper UI practice to keep the button disabled until valid input has been made."),(0,r.kt)("h2",{id:"reactive-command-"},"Reactive Command"," "),(0,r.kt)("p",null,"As a starting point, you can create a simple view like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<StackPanel Margin="20">\n  <TextBlock Margin="0 5" >User Name</TextBlock>\n  <TextBox Text="Binding UserName"/>\n  <Button Margin="0 20" Command="Binding SubmitCommand">Submit</Button>\n</StackPanel>\n')),(0,r.kt)("img",{src:"/img/gitbook-import/assets/image (2) (1) (1) (1).png",alt:""}),(0,r.kt)("p",null,"You can add a corresponding view model like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'public class MainWindowViewModel : ViewModelBase\n{\n    private string _userName = string.Empty;\n\n    public string UserName\n    {\n        get { return _userName; }\n        set { this.RaiseAndSetIfChanged(ref _userName, value); }\n    }\n\n    public ReactiveCommand<Unit, Unit> SubmitCommand { get; }\n\n    public MainWindowViewModel()\n    {\n        SubmitCommand = ReactiveCommand.Create(() => \n        {\n            Debug.WriteLine("The submit command was run.");\n        }); \n    }\n}\n')),(0,r.kt)("p",null,"This view model does not yet perform revealed functionality. The ",(0,r.kt)("inlineCode",{parentName:"p"},"SubmitCommand")," is declared with no parameter, and no result (void). The synchronous action parameter of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Create")," method is where you implement what happens when the command is run (when the user clicks the button). The example above just reports the action in the debug window."),(0,r.kt)("img",{src:"/img/gitbook-import/assets/image (6) (1) (1).png",alt:""}),(0,r.kt)("h2",{id:"can-execute"},"Can Execute?"),(0,r.kt)("p",null,"When you use ",(0,r.kt)("em",{parentName:"p"},"ReactiveUI")," to implement revealed functionality, you create an observable object that indicates whether your command can execute or not."," "),(0,r.kt)("p",null,"For example, you can add this code to the above view model to create an observable object to validate the view model:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"IObservable<bool> isInputValid = this.WhenAnyValue(\n                x => x.UserName,\n                x => !string.IsNullOrWhiteSpace(x) && x.Length > 7\n                );\n")),(0,r.kt)("p",null,"The observable object monitors the value of the ",(0,r.kt)("inlineCode",{parentName:"p"},"UserName")," property and runs the validation function whenever it changes. The observable objectis created by the ",(0,r.kt)("inlineCode",{parentName:"p"},"WhenAnyValue")," function of the ",(0,r.kt)("inlineCode",{parentName:"p"},"ReactiveObject")," that underlies the view model (see the previous page ",(0,r.kt)("a",{parentName:"p",href:"/avalonia-docs/docs/next/concepts/reactiveui/reactive-view-model"},"here"),")."),(0,r.kt)("p",null,"Next add the observable object to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Create")," method. This second parameter is the ",(0,r.kt)("inlineCode",{parentName:"p"},"canExecute")," argument for the method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'SubmitCommand = ReactiveCommand.Create(() => \n{\n   Debug.WriteLine("The submit command was run.");\n}, isInputValid); \n')),(0,r.kt)("p",null,"Now you will see that the button only becomes enabled once you have entered 8 characters."),(0,r.kt)("img",{src:"/img/gitbook-import/assets/image (6) (1) (2).png",alt:""}))}u.isMDXComponent=!0}}]);