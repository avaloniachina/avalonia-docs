"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[45195],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>h});var n=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(r),g=i,h=c["".concat(l,".").concat(g)]||c[g]||d[g]||o;return r?n.createElement(h,a(a({ref:t},p),{},{components:r})):n.createElement(h,a({ref:t},p))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,a[1]=s;for(var u=2;u<o;u++)a[u]=r[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}g.displayName="MDXCreateElement"},2042:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=r(87462),i=(r(67294),r(3905));const o={id:"debugging-previewer",title:"Debugging Previewer"},a=void 0,s={unversionedId:"guides/developer-guides/debugging-previewer",id:"version-0.10.x/guides/developer-guides/debugging-previewer",title:"Debugging Previewer",description:"By default, even if you would put a breakpoint in Avalonia main repo directly it would not be hit when Previewer executes this code. This is because Previewer is a completely different process usually run by IDE.",source:"@site/versioned_docs/version-0.10.x/guides/developer-guides/debugging-previewer.md",sourceDirName:"guides/developer-guides",slug:"/guides/developer-guides/debugging-previewer",permalink:"/avalonia-docs/docs/guides/developer-guides/debugging-previewer",draft:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/versioned_docs/version-0.10.x/guides/developer-guides/debugging-previewer.md",tags:[],version:"0.10.x",frontMatter:{id:"debugging-previewer",title:"Debugging Previewer"},sidebar:"documentationSidebar",previous:{title:"Comparison of Avalonia with WPF and UWP",permalink:"/avalonia-docs/docs/guides/developer-guides/comparison-of-avalonia-with-wpf-and-uwp"},next:{title:"Debugging the XAML compiler",permalink:"/avalonia-docs/docs/guides/developer-guides/debugging-xamlil"}},l={},u=[],p={toc:u},c="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(c,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"By default, even if you would put a breakpoint in Avalonia main repo directly it would not be hit when Previewer executes this code. This is because Previewer is a completely different process usually run by IDE."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Debugging with JetBrains Rider")),(0,i.kt)("p",null,'First of all to debug previewer process you will need to attach debugger to the process. To do that you may use Ctrl+Alt+P shortcut or click "..." button and then click "Attach to the Process".'),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://github.com/AvaloniaUI/avalonia-docs/assets/53405089/767a290d-905a-483d-bfa4-e8ee918c6bca",alt:"image"})),(0,i.kt)("p",null,"Then in the search field you will need to type Avalonia and find this process,you may identify it by the Avalonia.Designer.HostApp.dll in the name."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://github.com/AvaloniaUI/avalonia-docs/assets/53405089/bf29bb6a-76a3-4290-944c-be06e2cb0eb4",alt:"image"})),(0,i.kt)("p",null,'Then you click "Attach with .NET Core Debugger" and after that by using "Search everywhere" Rider feature you may place breakpoints in the previewer code and debug it.'),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Debugging with Visual Studio")),(0,i.kt)("p",null,'To start debugging you would need a process ID. To get it you need to switch the output to Avalonia Diagnostics. Then you copy the number before the "Connection initialized" message. This number is the previewer process ID.\n',(0,i.kt)("img",{parentName:"p",src:"https://github.com/AvaloniaUI/avalonia-docs/assets/53405089/0b77cb87-2454-458e-9722-0659525feeb9",alt:"image"})),(0,i.kt)("p",null,"Then you may find process by the process id in the process explorer or some other program and attach the debugger manually."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://github.com/AvaloniaUI/avalonia-docs/assets/53405089/2c50bf8d-047c-481c-af01-00474acc73fe",alt:"image"})),(0,i.kt)("p",null,'When you know the process id you can simply click "Debug" in process explorer. But sometimes previewer process may crash even before you would attach your debugger. Then you will need to add this code th the Main method in the Program.cs.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},"Debugger.Launch();\nwhile (!Debugger.IsAttached)\n  Thread.Sleep(100);\n")),(0,i.kt)("p",null,"This code will attach debugger to the previewer programmatically."),(0,i.kt)("p",null,"But if you need to place breakpoints in the previewer code you may need to use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/dnSpy/dnSpy"},"dnSpy")," or something similar because Visual Studio doesen't support that."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"How would I understand that I have launched a debugger?")),(0,i.kt)("p",null,"You should see a window like this."),(0,i.kt)("div",{style:{textAlign:"center"}},(0,i.kt)("img",{src:"/img/guides/developer-guides/debugging-previewer/132686320-958f30a6-49f8-498f-853c-b9dd17262b54.png"})))}d.isMDXComponent=!0}}]);