"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[85493],{8864:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>a});var i=r(85893),s=r(11151);const o={info:"index",title:"WPF Developer Tips"},t="Dispatcher changes",d={id:"wpf-developer-tips/index",title:"WPF Developer Tips",description:"Avalonia is in general very similar to WPF, but you will find differences. Here are the most common:",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-0.10.x/wpf-developer-tips/index.md",sourceDirName:"wpf-developer-tips",slug:"/wpf-developer-tips/",permalink:"/avalonia-docs/zh-Hans/docs/0.10.x/wpf-developer-tips/",draft:!1,unlisted:!1,editUrl:"https://github.com/AvaloniaUI/avalonia-docs/tree/main/i18n/zh-Hans/docusaurus-plugin-content-docs/version-0.10.x/wpf-developer-tips/index.md",tags:[],version:"0.10.x",frontMatter:{info:"index",title:"WPF Developer Tips"},sidebar:"documentationSidebar",previous:{title:"Build and Run your Application on your iPhone or iPad",permalink:"/avalonia-docs/zh-Hans/docs/0.10.x/tutorials/developing-for-mobile/ios/build-and-run-your-application-on-your-iphone-or-ipad"},next:{title:"Styling",permalink:"/avalonia-docs/zh-Hans/docs/0.10.x/wpf-developer-tips/styling"}},l={},a=[];function c(e){const n={a:"a",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Avalonia is in general very similar to WPF, but you will find differences. Here are the most common:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"styling",children:"Styling"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"datatemplates",children:"DataTemplates"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"hierachicaldatatemplate",children:"HierachicalDataTemplate.md"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"uielement-frameworkelement-and-control",children:"UIElement, FrameworkElement and Control\n"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"dependencyproperty",children:"DependencyProperty"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"grid",children:"Grid"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"itemscontrol",children:"ItemsControl"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"tunnelling-events",children:"Tunnelling Events"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"class-handlers",children:"Class Handlers"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"propertychangedcallback",children:"PropertyChangedCallback"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"rendertransforms-and-rendertransformorigin",children:"RenderTransforms & RenderTransformorigin"})}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"dispatcher-changes",children:"Dispatcher changes"}),"\n",(0,i.jsxs)(n.p,{children:["If you use ",(0,i.jsx)(n.code,{children:"Application.Current.Dispatcher"}),", you should use ",(0,i.jsx)(n.code,{children:"Dispatcher.UIThread"})," instead which provide similar facilities."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WPF"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Application.Current.Dispatcher.InvokeAsync(handler, DispatcherPriority.Background);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Avalonia"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Dispatcher.UIThread.InvokeAsync(handler, DispatcherPriority.Background);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you previously access dispatcher on the control itself, you should use global static instance ",(0,i.jsx)(n.code,{children:"Dispatcher.UIThread"})," too."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WPF"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"this.Dispatcher.InvokeAsync(handler, DispatcherPriority.Background);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Avalonia"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Dispatcher.UIThread.InvokeAsync(handler, DispatcherPriority.Background);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In more details, it's explained in the ",(0,i.jsx)(n.a,{href:"/avalonia-docs/zh-Hans/docs/0.10.x/guides/basics/accessing-the-ui-thread",children:"Accessing the UI thread"})," article."]}),"\n",(0,i.jsx)(n.h1,{id:"visibility-of-elements",children:"Visibility of elements"}),"\n",(0,i.jsxs)(n.p,{children:["WPF has uses ",(0,i.jsx)(n.code,{children:"Visibility"})," property which can be ",(0,i.jsx)(n.code,{children:"Collapsed"}),", ",(0,i.jsx)(n.code,{children:"Hidden"})," or ",(0,i.jsx)(n.code,{children:"Visible"}),". Avalonia uses simpler and more intuitive model ",(0,i.jsx)(n.code,{children:"bool IsVisible"}),"."]}),"\n",(0,i.jsx)(n.h1,{id:"binding",children:"Binding"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WPF"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<TextBox Name="MyTextbox" Text="{Binding ElementName=searchTextBox, Path=Text}"" />\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Avalonia"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<TextBox Name="MyTextbox" Text="{Binding #searchTextBox.Text}" />\n'})}),"\n",(0,i.jsx)(n.h1,{id:"handling-attachment-to-visual-tree",children:"Handling attachment to visual tree"}),"\n",(0,i.jsxs)(n.p,{children:["There no events like ",(0,i.jsx)(n.code,{children:"Loaded"}),"/",(0,i.jsx)(n.code,{children:"Unloaded"})," in Avalonia, but you can override ",(0,i.jsx)(n.code,{children:"OnAttachedToVisualTree"}),"/",(0,i.jsx)(n.code,{children:"OnDetachedFromVisualTree"})," on the control, to know when control attached to virtual tree, or detatched from it. Alternatively you can use ",(0,i.jsx)(n.code,{children:"TemplateApplied"})," instead of ",(0,i.jsx)(n.code,{children:"Loaded"})," event."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WPF"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Unloaded += OnControl_Unloaded;\nLoaded += OnControl_Loaded;\n\nprivate void OnControl_Loaded(object sender, RoutedEventArgs e)\n{\n    // Handle control loaded event.\n}\n\nprivate void OnControl_Unloaded(object sender, RoutedEventArgs e)\n{\n    // Handle control unload event.\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Avalonia"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"TemplateApplied += OnControl_Loaded;\nprivate void OnControl_Loaded(object sender, RoutedEventArgs e)\n{\n\n}\n// or\nprotected override void OnAttachedToVisualTree(VisualTreeAttachmentEventArgs e)\n{\n    // Handle control loaded event.\n}\n\n// Use this instead of Unloaded event.\nprotected override void OnDetachedFromVisualTree(VisualTreeAttachmentEventArgs e)\n{\n    // Handle control unload event.\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"That mean that you cannot subscribe to tree attachment/detachment events for other controls."}),"\n",(0,i.jsx)(n.h1,{id:"tooltips",children:"Tooltips"}),"\n",(0,i.jsxs)(n.p,{children:["Avalonia controls does not have ",(0,i.jsx)(n.code,{children:"ToolTip"})," property like WPF. Instead you should use ",(0,i.jsx)(n.code,{children:"ToolTip.Tip"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WPF"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'<Button ToolTip="Save file as..." />\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Avalonia"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'<Button ToolTip.Tip="Save file as..." />\n'})}),"\n",(0,i.jsx)(n.h1,{id:"textrun-decorations",children:"TextRun decorations"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"WPF"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"TextRunProperties.SetTextDecorations(TextDecorations.Underline);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Avalonia"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"TextRunProperties.Underline = true;\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>d,a:()=>t});var i=r(67294);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);